import{_ as l}from"./FilmsBox.bb015a19.js";import{i as a,a6 as e,a7 as s,a1 as i,$ as t,f as n,g as o,p as c,v as m,a8 as d}from"./vendor.7cb940fd.js";import"./index.82692d49.js";const r={data:()=>({loading:!1,post:null,error:null,cloud:cloudbase.init({env:"yui-7gel1hqtaf6fb79d"})}),setup:l=>({fclass:a(""),filmsDetail:a(""),nickname:a("")}),created(){console.log(this.$route.query.id),this.cloud.auth({persistence:"local"});const l=this.cloud.database();l.command,l.collection("films").where({_id:this.$route.params.id}).orderBy("created","desc").limit(1).get().then((a=>{this.filmsDetail=a.data[0],l.collection("fclass").where({cid:this.filmsDetail.class}).get().then((l=>{this.fclass=l.data[0].fname})),l.collection("user").where({_openid:this.filmsDetail._openid}).get().then((l=>{this.nickname=l.data[0].nickname})),console.log(this.filmsDetail)}))},methods:{formatterTime:(l,a,e,s)=>moment(e).format("YYYY/MM/DD"),formatterTimeYear:(l,a,e,s)=>moment(e).format("YYYY")},components:{FilmsBox:l}},f=d();e("data-v-74ae766c");const u={class:"filmdetail"},h={key:0,style:{width:"700px","margin-top":"40px"}},p={key:1},v={class:"film-top"},D={class:"film-message"},k={class:"name"},g={key:0,class:"fclass"},y={class:"jianjie"},Y={class:"upload-time"},b={class:"upload-owner"},j={class:"rate",style:{display:"flex"}},w=o("span",null,"评分:",-1),x={class:"film-btn"},_=o("i",{class:"el-icon-link"},null,-1),T=o("i",{class:"el-icon-star-off"},null,-1),q=o("i",{class:"el-icon-chat-square"},null,-1),B={class:"film-main"},F=o("h3",null,"简介",-1),$=o("h3",null,"推荐理由",-1);s();const M=f(((l,a,e,s,d,r)=>{const f=i("el-skeleton"),M=i("el-rate");return t(),n("div",u,[s.fclass||s.nickname?c("",!0):(t(),n("div",h,[o(f,{rows:5,animated:""})])),s.fclass&&s.nickname?(t(),n("div",p,[o("div",v,[s.filmsDetail?(t(),n("img",{key:0,src:s.filmsDetail.tempFileURL},null,8,["src"])):c("",!0),o("div",D,[o("div",k,"名称:"+m(s.filmsDetail.name),1),s.fclass?(t(),n("div",g,"类型:"+m(s.fclass),1)):c("",!0),o("div",y," 年份:"+m(r.formatterTimeYear(s.filmsDetail.year)),1),o("div",Y," 上传时间:"+m(r.formatterTime(s.filmsDetail.created)),1),o("div",b,"上传者:"+m(s.nickname),1),o("div",j,[w,o(M,{"model-value":s.filmsDetail.rateValue,"allow-half":"",disabled:""},null,8,["model-value"])])])]),o("div",x,[o("a",{href:s.filmsDetail.link,target:"_blank"},[_],8,["href"]),T,q]),o("div",B,[F,o("p",null,m(s.filmsDetail.jianjie),1),$,o("p",null,m(s.filmsDetail.liyou),1)])])):c("",!0)])}));r.render=M,r.__scopeId="data-v-74ae766c";export default r;
