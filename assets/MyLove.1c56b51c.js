import{_ as v}from"./main.8ddcf4cb.js";import{r as a,o as d,j as h,g as i,b as s,f as n,t as f,e as u,h as x,p as I,d as D,a as y,F as k,a5 as F}from"./vendor.3249e4ba.js";const M={data(){return{filmDetail:null}},props:["filmid","loved"],created(){const e=this.$cloudbase.database();e.command,e.collection("films").where({_id:this.filmid}).get().then(t=>{this.filmDetail=t.data[0]})},methods:{nolove(){const e=this.$auth.getAuthHeader(),t=this.$cloudbase.database();t.command,t.collection("mylove").where({_openid:e.uid,filmId:this.filmid}).remove().then(m=>{this.$emit("initdata"),this.$ElMessage.success({message:"\u53D6\u6D88\u6536\u85CF\u4E86!",type:"success"})})}},components:{}},$=e=>(I("data-v-0664e879"),e=e(),D(),e),w={class:"mylove-card-crl"},L=$(()=>s("div",{class:"image-slot"},[u("\u52A0\u8F7D\u4E2D"),s("span",{class:"dot"},"...")],-1)),B={class:"mylove-card-name"},C={class:"mylove-card-class"},S=u(" \u6536\u85CF\u65F6\u95F4 ");function N(e,t,m,g,o,c){const r=a("el-image"),_=a("router-link"),p=a("Timer"),l=a("el-card");return o.filmDetail?(d(),h(l,{key:0},{default:i(()=>[s("div",w,[s("span",{onClick:t[0]||(t[0]=(...b)=>c.nolove&&c.nolove(...b))},"\u53D6\u6D88\u6536\u85CF")]),n(_,{to:{name:"filmdetail",params:{id:o.filmDetail._id}}},{default:i(()=>[n(r,{class:"img",src:o.filmDetail.tempFileURL,lazy:"",style:{width:"120px",height:"165px"}},{placeholder:i(()=>[L]),_:1},8,["src"])]),_:1},8,["to"]),s("h4",B,[s("span",C,f(o.filmDetail.class),1),u(f(o.filmDetail.name),1)]),s("p",null,[S,n(p,{time:m.loved},null,8,["time"])])]),_:1})):x("",!0)}var V=v(M,[["render",N],["__scopeId","data-v-0664e879"]]);const j={data(){return{data:""}},computed:{},created(){this.getMylove()},methods:{getMylove(){this.data="";const e=this.$cloudbase.database();e.command,e.collection("mylove").where({_openid:localStorage.getItem("openid")}).limit(10).orderBy("created","desc").get().then(t=>{console.log(t),this.data=t.data})}},components:{"film-detail-love":V}},T={class:"mylove"};function E(e,t,m,g,o,c){const r=a("film-detail-love"),_=a("el-timeline-item"),p=a("el-timeline");return d(),y("div",T,[(d(!0),y(k,null,F(o.data,l=>(d(),h(p,null,{default:i(()=>[n(_,{timestamp:l.created,placement:"top","hide-timestamp":"",color:"#FFF"},{default:i(()=>[n(r,{onInitdata:c.getMylove,filmid:l.filmId,loved:l.created},null,8,["onInitdata","filmid","loved"])]),_:2},1032,["timestamp"])]),_:2},1024))),256))])}var A=v(j,[["render",E],["__scopeId","data-v-53f04e66"]]);export{A as default};
