import{_ as e}from"./main.584339ff.js";import{a7 as a,a8 as t,a3 as l,a1 as s,f as i,g as o,v as d,Q as m,p as c,a9 as n,F as r,J as f}from"./vendor.6d187631.js";const p={data:()=>({filmDetail:null}),props:["filmid","loved"],created(){const e=this.$cloudbase.database();e.command,e.collection("films").where({_id:this.filmid}).get().then((e=>{this.filmDetail=e.data[0]}))},methods:{nolove(){const a=this.$auth.getAuthHeader(),t=this.$cloudbase.database();t.command,t.collection("mylove").where({_openid:a.uid,filmId:this.filmid}).remove().then((a=>{this.$emit("initdata"),e.success({message:"取消收藏了!",type:"success"})}))}},components:{}},v=n();a("data-v-5a824693");const h={class:"mylove-card-crl"},u=o("div",{class:"image-slot"},[m("加载中"),o("span",{class:"dot"},"...")],-1),g={class:"mylove-card-name"},y={class:"mylove-card-class"},_=m(" 收藏时间 ");t();const D=v(((e,a,t,n,r,f)=>{const p=l("el-image"),D=l("router-link"),I=l("Timer"),b=l("el-card");return r.filmDetail?(s(),i(b,{key:0},{default:v((()=>[o("div",h,[o("span",{onClick:a[1]||(a[1]=(...e)=>f.nolove&&f.nolove(...e))},"取消收藏")]),o(D,{to:{name:"filmdetail",params:{id:r.filmDetail._id}}},{default:v((()=>[o(p,{class:"img",src:r.filmDetail.tempFileURL,lazy:"",style:{width:"120px",height:"165px"}},{placeholder:v((()=>[u])),_:1},8,["src"])])),_:1},8,["to"]),o("h4",g,[o("span",y,d(r.filmDetail.class),1),m(d(r.filmDetail.name),1)]),o("p",null,[_,o(I,{time:t.loved},null,8,["time"])])])),_:1})):c("",!0)}));p.render=D,p.__scopeId="data-v-5a824693";const I={data:()=>({data:""}),computed:{},created(){this.getMylove()},methods:{getMylove(){this.data="";const e=this.$cloudbase.database();e.command,e.collection("mylove").where({_openid:localStorage.getItem("openid")}).limit(10).orderBy("created","desc").get().then((e=>{console.log(e),this.data=e.data}))}},components:{"film-detail-love":p}},b=n();a("data-v-53f04e66");const F={class:"mylove"};t();const $=b(((e,a,t,d,m,c)=>{const n=l("film-detail-love"),p=l("el-timeline-item"),v=l("el-timeline");return s(),i("div",F,[(s(!0),i(r,null,f(m.data,(e=>(s(),i(v,null,{default:b((()=>[o(p,{timestamp:e.created,placement:"top","hide-timestamp":"",color:"#FFF"},{default:b((()=>[o(n,{onInitdata:c.getMylove,filmid:e.filmId,loved:e.created},null,8,["onInitdata","filmid","loved"])])),_:2},1032,["timestamp"])])),_:2},1024)))),256))])}));I.render=$,I.__scopeId="data-v-53f04e66";export default I;
