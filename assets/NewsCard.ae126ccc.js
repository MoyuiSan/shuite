import{N as w}from"./NewsItem.33f85c4f.js";import{_ as y}from"./main.6ba1aa7a.js";import{r as l,o as t,a,b as m,h as i,f as d,F as _,a8 as g,p as v,d as b}from"./vendor.c71fd20d.js";const N={name:"NewsCard",data(){return{newsData:[],vedio:"",isPlay:!1,loading:!0}},created(){this.getNews();const e=this.$cloudbase.database(),o=e.command;e.collection("films").where({playlink:o.neq("")}).limit(5).orderBy("updated","desc").get().then(n=>{if(n.data){const r=n.data.length,s=Math.ceil(Math.random()*r);console.log(s),this.vedio=n.data[s].playlink}})},mounted(){},methods:{getNews(){const e=this.$cloudbase.database();e.command,e.collection("films").limit(5).orderBy("updated","desc").get().then(o=>{setTimeout(()=>{this.newsData=o.data,this.loading=!1},1e3)})},playVedio(){this.isPlay=!0}},components:{"news-item":w}},k=e=>(v("data-v-de7be634"),e=e(),b(),e),x={class:"news-banner boxshadow"},C=k(()=>m("h4",null,"\u63A8\u8350\u5F71\u7247",-1)),I=["src"],B={key:1,class:"iframe-vedio news-vedio"},V={key:0,class:"loading"},j={class:"news-item"};function D(e,o,n,r,s,c){const p=l("lottie-player-s"),u=l("shuite-loading"),h=l("news-item");return t(),a(_,null,[m("div",x,[C,s.isPlay?(t(),a("iframe",{key:0,src:"//player.bilibili.com/player.html?bvid="+s.vedio+"&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true",class:"iframe-vedio"},`\r
    `,8,I)):i("",!0),s.isPlay?i("",!0):(t(),a("div",B,[d(p,{srcUrl:"https://assets1.lottiefiles.com/packages/lf20_fgltupfx.json",style:{cursor:"pointer"},onClick:c.playVedio},null,8,["srcUrl","onClick"])]))]),s.loading?(t(),a("div",V,[d(u,{class:"boxshadow"})])):i("",!0),s.newsData?(t(!0),a(_,{key:1},g(s.newsData,f=>(t(),a("div",j,[d(h,{data:f,onGetNews:c.getNews},null,8,["data","onGetNews"])]))),256)):i("",!0)],64)}var G=y(N,[["render",D],["__scopeId","data-v-de7be634"]]);export{G as default};
