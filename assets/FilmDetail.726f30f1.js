import{_ as l}from"./FilmsBox.aaaa4caa.js";import{i as a,a6 as s,a7 as e,a1 as i,$ as t,f as n,g as o,p as m,Q as c,v as d,a8 as r}from"./vendor.7cb940fd.js";import"./index.e4fe5246.js";const f={data:()=>({loading:!1,post:null,error:null,cloud:cloudbase.init({env:"yui-7gel1hqtaf6fb79d"})}),setup:l=>({fclass:a(""),filmsDetail:a(""),nickname:a("")}),created(){console.log(this.$route.query.id),this.cloud.auth({persistence:"local"});const l=this.cloud.database();l.command,l.collection("films").where({_id:this.$route.params.id}).orderBy("created","desc").limit(1).get().then((a=>{this.filmsDetail=a.data[0],l.collection("fclass").where({cid:this.filmsDetail.class}).get().then((l=>{this.fclass=l.data[0].fname})),l.collection("user").where({_openid:this.filmsDetail._openid}).get().then((l=>{this.nickname=l.data[0].nickname})),console.log(this.filmsDetail)}))},methods:{formatterTime:(l,a,s,e)=>moment(s).format("YYYY/MM/DD"),formatterTimeYear:(l,a,s,e)=>moment(s).format("YYYY")},components:{FilmsBox:l}},u=r();s("data-v-7319a444");const p={class:"filmdetail"},h={key:0,style:{width:"700px","margin-top":"40px"}},v={key:1,class:"film-box"},D={class:"film-top"},k={class:"film-message"},g={class:"name"},y=o("span",null,"名称:",-1),Y={key:0,class:"fclass"},b=o("span",null,"类型:",-1),x={class:"jianjie"},j=o("span",null,"年份:",-1),w={class:"upload-time"},_=o("span",null,"上传时间:",-1),T={class:"upload-owner"},q=o("span",null,"上传者:",-1),B={class:"rate",style:{display:"flex"}},F=o("span",null,"评分:",-1),$={class:"film-btn"},M=o("i",{class:"el-icon-link"},null,-1),I=o("i",{class:"el-icon-star-off"},null,-1),L=o("i",{class:"el-icon-chat-square"},null,-1),Q={class:"film-main"},R=o("h3",null,"简介",-1),U=o("h3",null,"推荐理由",-1);e();const V=u(((l,a,s,e,r,f)=>{const u=i("el-skeleton"),V=i("el-rate");return t(),n("div",p,[e.fclass||e.nickname?m("",!0):(t(),n("div",h,[o(u,{rows:5,animated:""})])),e.fclass&&e.nickname?(t(),n("div",v,[o("div",D,[e.filmsDetail?(t(),n("img",{key:0,src:e.filmsDetail.tempFileURL},null,8,["src"])):m("",!0),o("div",k,[o("div",g,[y,c(d(e.filmsDetail.name),1)]),e.fclass?(t(),n("div",Y,[b,c(d(e.fclass),1)])):m("",!0),o("div",x,[j,c(d(f.formatterTimeYear(e.filmsDetail.year)),1)]),o("div",w,[_,c(d(f.formatterTime(e.filmsDetail.created)),1)]),o("div",T,[q,c(d(e.nickname),1)]),o("div",B,[F,o(V,{"model-value":e.filmsDetail.rateValue,"allow-half":"",disabled:""},null,8,["model-value"])])])]),o("div",$,[o("a",{href:e.filmsDetail.link,target:"_blank"},[M],8,["href"]),I,L]),o("div",Q,[R,o("p",null,d(e.filmsDetail.jianjie),1),U,o("p",null,d(e.filmsDetail.liyou),1)])])):m("",!0)])}));f.render=V,f.__scopeId="data-v-7319a444";export default f;
