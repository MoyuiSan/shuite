import"./main.7aa2fb9c.js";import{i as e,a6 as a,a7 as t,a1 as l,$ as o,f as s,g as i,F as n,J as r,v as u,p as d,a8 as c,Q as p}from"./vendor.7cb940fd.js";const h={data:()=>({tableData:[],currentPage:1,auth:null,dialogTableVisible:!1,dialogFormVisible:!1,authList:[{value:"1",label:"普通权限"},{value:"0",label:"管理员"}],authValue:"",selectUid:""}),setup:()=>({input:e("")}),created(){this.$auth.getAuthHeader();const e=this.$cloudbase.database();e.command,e.collection("user").where({uid:"9943f58b9fbc49af9f34f2ac0239244f"}).update({uauth:"0"}).then((e=>{console.log(e)})),this.getUserData()},methods:{handleSizeChange(e){console.log(`每页 ${e} 条`)},handleCurrentChange(e){console.log(`当前页: ${e}`)},getUserData(){const e=this.$cloudbase.database();e.command,e.collection("user").get().then((e=>{this.tableData=e.data}))},formatter:(e,a,t,l)=>"uauth"===a.property&&"1"===t?"普通用户":"uauth"===a.property&&"0"===t?"核心用户\t":"isEffect"===a.property&&"1"===t?"生效":"isEffect"===a.property&&"0"===t?"失效":void 0,noEffect(e){},modifyAuth(){this.dialogFormVisible=!1,console.log(this.selectUid,this.authValue),this.$cloudbase.callFunction({name:"shuiteApi",data:{editAuth:this.authValue,event:"EDIT_USER_AUTH"}}).then((e=>{this.getUserData(),console.log(e)})).catch(console.error)},handleClickAuth(e){this.dialogFormVisible=!0,this.selectUid=e.uid}},components:{}},f=c();a("data-v-e0b9ca90");const m={class:"user-add"},b={class:"input-email"},g=p("提交"),C={style:{float:"left"}},y={style:{float:"right",color:"#8492a6","font-size":"13px"}},V={class:"dialog-footer"},v=p("取 消"),k=p("确 定"),_=i("span",{style:{color:"#ccc"}},"失效",-1),z=p("生效"),E=p("权限"),U=p("删除"),x={class:"pageation"};t();const A=f(((e,a,t,c,p,h)=>{const A=l("el-input"),F=l("el-button"),w=l("el-option"),D=l("el-select"),$=l("el-dialog"),S=l("el-table-column"),j=l("el-table"),T=l("el-pagination");return o(),s(n,null,[i("div",m,[i("form",b,[i(A,{placeholder:"请输入用户邮箱",modelValue:c.input,"onUpdate:modelValue":a[1]||(a[1]=e=>c.input=e),clearable:"",type:"email"},null,8,["modelValue"]),i(F,{"native-type":"submit",onClick:e.searchEmail},{default:f((()=>[g])),_:1},8,["onClick"])])]),i($,{title:"权限列表",modelValue:p.dialogFormVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>p.dialogFormVisible=e)},{footer:f((()=>[i("span",V,[i(F,{onClick:a[3]||(a[3]=e=>p.dialogFormVisible=!1)},{default:f((()=>[v])),_:1}),i(F,{type:"primary",onClick:h.modifyAuth},{default:f((()=>[k])),_:1},8,["onClick"])])])),default:f((()=>[i(D,{modelValue:p.authValue,"onUpdate:modelValue":a[2]||(a[2]=e=>p.authValue=e),placeholder:"请选择"},{default:f((()=>[(o(!0),s(n,null,r(p.authList,(e=>(o(),s(w,{key:e.value,label:e.label,value:e.value},{default:f((()=>[i("span",C,u(e.label),1),i("span",y,u(e.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"]),i(j,{data:p.tableData,"default-sort":{prop:"date",order:"descending"},class:"films-table"},{default:f((()=>[i(S,{prop:"email",label:"邮箱",sortable:""}),i(S,{prop:"uauth",label:"权限",sortable:"",formatter:h.formatter},null,8,["formatter"]),i(S,{prop:"isEffect",label:"启用状态",sortable:"",formatter:h.formatter},null,8,["formatter"]),i(S,{fixed:"right",label:"操作",width:"120"},{default:f((e=>["1"==e.row.isEffect?(o(),s(F,{key:0,onClick:a=>h.noEffect(e.row),type:"text",size:"small"},{default:f((()=>[_])),_:2},1032,["onClick"])):d("",!0),"0"==e.row.isEffect?(o(),s(F,{key:1,onClick:a=>h.noEffect(e.row),type:"text",size:"small"},{default:f((()=>[z])),_:2},1032,["onClick"])):d("",!0),i(F,{type:"text",size:"small",onClick:a=>h.handleClickAuth(e.row)},{default:f((()=>[E])),_:2},1032,["onClick"]),i(F,{type:"text",size:"small"},{default:f((()=>[U])),_:1})])),_:1})])),_:1},8,["data"]),i("div",x,[i(T,{onSizeChange:h.handleSizeChange,onCurrentChange:h.handleCurrentChange,"current-page":p.currentPage,"page-sizes":[100,200,300,400],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:400,style:{"margin-top":"20px"}},null,8,["onSizeChange","onCurrentChange","current-page"])])],64)}));h.render=A,h.__scopeId="data-v-e0b9ca90";export default h;
