import"./main.95043788.js";import{i as e,a7 as a,a8 as l,a3 as t,a1 as o,f as s,g as i,F as n,J as r,v as u,p as d,a9 as c,Q as h}from"./vendor.6d187631.js";const f={data:()=>({tableData:[],currentPage:1,auth:null,dialogTableVisible:!1,dialogFormVisible:!1,authList:[{value:"1",label:"普通权限"},{value:"0",label:"管理员"}],authValue:"",selectUid:""}),setup:()=>({input:e("")}),created(){this.$auth.getAuthHeader();const e=this.$cloudbase.database();e.command,e.collection("user").where({uid:"9943f58b9fbc49af9f34f2ac0239244f"}).update({uauth:"0"}).then((e=>{console.log(e)})),this.getUserData()},methods:{handleSizeChange(e){console.log(`每页 ${e} 条`)},handleCurrentChange(e){console.log(`当前页: ${e}`)},getUserData(){const e=this.$cloudbase.database();e.command,e.collection("user").get().then((e=>{this.tableData=e.data}))},formatter:(e,a,l,t)=>"uauth"===a.property&&"1"===l?"普通用户":"uauth"===a.property&&"0"===l?"核心用户\t":"isEffect"===a.property&&"1"===l?"生效":"isEffect"===a.property&&"0"===l?"失效":void 0,noEffect(e){},modifyAuth(){this.dialogFormVisible=!1,console.log(this.selectUid,this.authValue),this.$cloudbase.callFunction({name:"shuiteApi",data:{editAuth:this.authValue,event:"EDIT_USER_AUTH"}}).then((e=>{this.getUserData(),console.log(e)})).catch(console.error)},handleClickAuth(e){this.dialogFormVisible=!0,this.selectUid=e.uid}},components:{}},p=c();a("data-v-7ff33ed5");const m={class:"user-add"},g=h("提交"),b={style:{float:"left"}},C={style:{float:"right",color:"#8492a6","font-size":"13px"}},y={class:"dialog-footer"},V=h("取 消"),k=h("确 定"),v=i("span",{style:{color:"#ccc"}},"失效",-1),_=h("生效"),z=h("权限"),x=h("删除"),U={class:"pageation"};l();const E=p(((e,a,l,c,h,f)=>{const E=t("el-input"),F=t("el-button"),A=t("el-option"),w=t("el-select"),D=t("el-dialog"),$=t("el-table-column"),S=t("el-table"),j=t("el-pagination");return o(),s(n,null,[i("div",m,[i(E,{placeholder:"请输入内容",modelValue:c.input,"onUpdate:modelValue":a[1]||(a[1]=e=>c.input=e),clearable:"",class:"film-search"},null,8,["modelValue"]),i(F,{onClick:e.searchFilms,type:"small",style:{height:"40px","margin-left":"10px"}},{default:p((()=>[g])),_:1},8,["onClick"])]),i(D,{title:"权限列表",modelValue:h.dialogFormVisible,"onUpdate:modelValue":a[4]||(a[4]=e=>h.dialogFormVisible=e)},{footer:p((()=>[i("span",y,[i(F,{onClick:a[3]||(a[3]=e=>h.dialogFormVisible=!1)},{default:p((()=>[V])),_:1}),i(F,{type:"primary",onClick:f.modifyAuth},{default:p((()=>[k])),_:1},8,["onClick"])])])),default:p((()=>[i(w,{modelValue:h.authValue,"onUpdate:modelValue":a[2]||(a[2]=e=>h.authValue=e),placeholder:"请选择"},{default:p((()=>[(o(!0),s(n,null,r(h.authList,(e=>(o(),s(A,{key:e.value,label:e.label,value:e.value},{default:p((()=>[i("span",b,u(e.label),1),i("span",C,u(e.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"]),i(S,{data:h.tableData,"default-sort":{prop:"date",order:"descending"},class:"films-table"},{default:p((()=>[i($,{prop:"email",label:"邮箱",sortable:""}),i($,{prop:"uauth",label:"权限",sortable:"",formatter:f.formatter},null,8,["formatter"]),i($,{prop:"isEffect",label:"启用状态",sortable:"",formatter:f.formatter},null,8,["formatter"]),i($,{fixed:"right",label:"操作",width:"120"},{default:p((e=>["1"==e.row.isEffect?(o(),s(F,{key:0,onClick:a=>f.noEffect(e.row),type:"text",size:"small"},{default:p((()=>[v])),_:2},1032,["onClick"])):d("",!0),"0"==e.row.isEffect?(o(),s(F,{key:1,onClick:a=>f.noEffect(e.row),type:"text",size:"small"},{default:p((()=>[_])),_:2},1032,["onClick"])):d("",!0),i(F,{type:"text",size:"small",onClick:a=>f.handleClickAuth(e.row)},{default:p((()=>[z])),_:2},1032,["onClick"]),i(F,{type:"text",size:"small"},{default:p((()=>[x])),_:1})])),_:1})])),_:1},8,["data"]),i("div",U,[i(j,{onSizeChange:f.handleSizeChange,onCurrentChange:f.handleCurrentChange,"current-page":h.currentPage,"page-sizes":[100,200,300,400],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:400,style:{"margin-top":"20px"}},null,8,["onSizeChange","onCurrentChange","current-page"])])],64)}));f.render=E,f.__scopeId="data-v-7ff33ed5";export default f;
